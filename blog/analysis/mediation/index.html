<!DOCTYPE html>
<html lang="en-us">
    <head>
        
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<meta name="description" content="StatsNotebook is an open source statistical package based on R.">
<title>
Causal Mediation Analysis - StatsNotebook - Simple. Powerful. Reproducible.
</title>



        <meta property="og:title" content="Causal Mediation Analysis - StatsNotebook - Simple. Powerful. Reproducible." />
<meta property="og:type" content="website" />
<meta property="og:description" content="StatsNotebook is an open source statistical package based on R."/>
<meta property="og:url" content="https://statsnotebook.io/blog/analysis/mediation/"/>
<meta property="og:site_name" content="StatsNotebook - Simple. Powerful. Reproducible."/>




<meta property="og:image" content="https://statsnotebook.io/home/profile.jpg"/>




        
<link rel="shortcut icon" href="/img/fav.ico">


        





<link rel="stylesheet" href="/css/main.min.f28d984107f6212e03d227484401a6dd3be66fc25c669e25afff2900fbf25dcf.css" integrity="sha256-8o2YQQf2IS4D0idIRAGm3Tvmb8JcZp4lr/8pAPvyXc8=" crossorigin="anonymous" media="screen">





        
        
        
        
    </head>
    <body>
        <section id="top" class="section">
            
            <div class="container hero  fade-in one ">
                

<h1 class="bold-title is-1">StatsNotebook</h1>


            </div>
            
            <div class="section  fade-in two ">
                
<div class="container">
    <hr>
    <nav class="navbar" role="navigation" aria-label="main navigation">
        
        <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false" >
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
        <div class="navbar-menu " id="navMenu">
            
            
            
            
            <a class="navbar-item" href="/">
                
                Home
                
            </a>
            
            
            
            <a class="navbar-item" href="/about">
                
                About
                
            </a>
            
            
            
            <a class="navbar-item" href="/blog/analysis">
                
                Analysis Tutorials
                
            </a>
            
            
            
            <a class="navbar-item" href="/blog/dataviz">
                
                Data Viz Tutorials
                
            </a>
            
            
            
            <a class="navbar-item" href="/blog">
                
                Blog
                
            </a>
            
            
            
            <a class="navbar-item" href="/download">
                
                Download
                
            </a>
            
            
            
            <a class="navbar-item" href="/consultation">
                
                Training and consultation
                
            </a>
            
            
            
        </div>
    </nav>
    <hr>
</div>



                
<div class="container">
    <h2 class="title is-1 top-pad strong-post-title">
        <a href="https://statsnotebook.io/blog/analysis/mediation/">Causal Mediation Analysis</a>
    </h2>
    <div class="post-data">
        23 Sep, 2020 |
        9 minutes read
    </div>
    
    <div class="blog-share">
        Share this:
        
        <a class="twitter-share-button" href="https://twitter.com/intent/tweet?text=Causal%20Mediation%20Analysis%20https%3a%2f%2fstatsnotebook.io%2fblog%2fanalysis%2fmediation%2f" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
            <i class="fab fa-twitter"></i>
            <span class="hidden">Twitter</span>
        </a>
        
        
        <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fstatsnotebook.io%2fblog%2fanalysis%2fmediation%2f" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
            <i class="fab fa-facebook-f"></i>
            <span class="hidden">Facebook</span>
        </a>
        
        
        
    </div>
    
    
    
    <p>
        Tags:
        
        <a href="/tags/analysis">Analysis</a>,
        
        <a href="/tags/r-code">R code</a>,
        
        <a href="/tags/regression">Regression</a>,
        
        <a href="/tags/causal-inference">Causal Inference</a>
        
    </p>
    
	<br/>
	<p><strong>Follow <a href="https://www.facebook.com/StatsNotebook/">our Facebook page</a> or <a href="https://twitter.com/GaryCKChan">our developer&rsquo;s Twitter</a> for more tutorials and future updates.</strong></p>
</div>

<div class="container markdown top-pad">
    <p>The tutorial is based on <a href="https://r-project.org" title="The R project for statistical computing">R</a> and <a href="https://statsnotebook.io" title="StatsNotebook">StatsNotebook</a>, a graphical interface for R.</p>
<p>Mediation analysis is a technique that examines the intermediate process by which the independent variable affects the dependent variable. For example, family intervention during adolescence (independent variable) can reduce engagement with deviant peer group (mediator) and their experimentation with drugs, which in turn reduces risk of substance use disorder in young adulthood (dependent variable).</p>
<p><strong>StatsNotebook</strong> uses the cutting-edge counterfactual framework and Monte Carlo technique to conduct causal mediation analysis. It can handle</p>
<ol>
<li>up to 3 mediators;</li>
<li>numeric, dichotomized and count mediators and dependent variables;</li>
<li>missing data using multiple imputation.</li>
</ol>
<p><strong>Since Monte Carlo method is very computationally intensive, it might take a long time to compute the mediation effect. Especially if there are missing data and multiple imputation is used.</strong></p>

<h4 id="example-research-questions" class="anchor-link"><a href="#example-research-questions">Example research questions</a></h4>
<ol>
<li>Does reduced engagement with deviant peer groups and reduced experimentation with drugs mediate the effect of the family intervention during adolescence on future substance use disorder?
<ul>
<li>In the example, we examine the causal chain &ldquo;Participation in family intervention -&gt; reduced engagement with deviant peer groups and experimentation with drugs -&gt; substance use disorder in young adulthood&rdquo;.</li>
<li>In other words, we expect that participation in family intervention during adolescence reduces engagement with deviant peer groups and experimentation with drugs, which in turns reduces the likelihood for substance use disorder in young adulthood.</li>
</ul>
</li>
</ol>
<p>In this example, the <em>dependent variable</em> is <em>substance use disorder</em> and the <em>independent variable</em> is <em>family intervention</em>. There are two mediators: <em>engaged with deviant peer group</em> and <em>experimentation with drugs</em>.</p>
<p>We will first show the R codes for this analysis below, and then we will provide a step-by-step guide on how to complete this analysis. We use the built-in <strong>substance</strong> dataset in this example. This dataset can be loaded into <strong>StatsNotebook</strong> using the instructions provided <a href="https://statsnotebook.io/blog/data_management/load_example_data/" title="load example">here</a>.</p>
<p>In this dataset,</p>
<ol>
<li><strong>dev_peer</strong> represents engagement with deviant peer groups and it was coded as &ldquo;0: No&rdquo; and &ldquo;1: Yes&rdquo;;</li>
<li><strong>sub_exp</strong> represents experimentation with drugs and it was coded as &ldquo;0: No&rdquo; and &ldquo;1: Yes&rdquo;;</li>
<li><strong>fam_int</strong> represents participation in family intervention during adolescence and it was coded as &ldquo;0: No&rdquo; and &ldquo;1: Yes&rdquo;;</li>
<li><strong>sub_disorder</strong> represents diagnosis of substance use disorder in young adulthood and it was coded as &ldquo;0: No: and &ldquo;1: Yes&rdquo;.</li>
<li><strong>conflict</strong> represents level of family conflict. It will be used as a covariate in this analysis.</li>
</ol>
<p>This dataset can also be loaded using the following codes</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#06287e">library</span>(tidyverse)
currentDataset <span style="color:#666">&lt;-</span> <span style="color:#06287e">read_csv</span>(<span style="color:#4070a0">&#34;https://statsnotebook.io/blog/data_management/example_data/substance.csv&#34;</span>)
</code></pre></div>
<h5 id="r-codes" class="anchor-link"><a href="#r-codes">R codes</a></h5>
<p>The first section of the code is for <a href="https://statsnotebook.io/blog/analysis/multiple_imputation/" title="Multiple imputation for missing data">imputating missing data</a>. In the second section, we use the <code>mediate</code> function from the <code>intmed</code> package to conduct a mediation analysis.</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">currentDataset<span style="color:#666">$</span>fam_int_1 <span style="color:#666">=</span> <span style="color:#007020;font-weight:bold">NA</span>
currentDataset<span style="color:#666">$</span>fam_int_1[currentDataset<span style="color:#666">$</span>fam_int <span style="color:#666">==</span> <span style="color:#4070a0">&#34;1&#34;</span>] <span style="color:#666">&lt;-</span> <span style="color:#40a070">1</span>
currentDataset<span style="color:#666">$</span>fam_int_1[currentDataset<span style="color:#666">$</span>fam_int <span style="color:#666">==</span> <span style="color:#4070a0">&#34;0&#34;</span>] <span style="color:#666">&lt;-</span> <span style="color:#40a070">0</span>

<span style="color:#4070a0">&#34;Multiple imputation&#34;</span>

<span style="color:#06287e">library</span>(mice)

formulas <span style="color:#666">&lt;-</span> <span style="color:#06287e">make.formulas</span>(currentDataset)

formulas<span style="color:#666">$</span>gender <span style="color:#666">=</span>gender <span style="color:#666">~</span> conflict <span style="color:#666">+</span> sub_disorder <span style="color:#666">+</span> fam_int_1 <span style="color:#666">+</span> dev_peer <span style="color:#666">+</span> sub_exp
formulas<span style="color:#666">$</span>conflict <span style="color:#666">=</span>conflict <span style="color:#666">~</span> gender <span style="color:#666">+</span> sub_disorder <span style="color:#666">+</span> fam_int_1 <span style="color:#666">+</span> dev_peer <span style="color:#666">+</span> sub_exp
formulas<span style="color:#666">$</span>sub_disorder <span style="color:#666">=</span>sub_disorder <span style="color:#666">~</span> gender <span style="color:#666">+</span> conflict <span style="color:#666">+</span> fam_int_1 <span style="color:#666">+</span> dev_peer <span style="color:#666">+</span> sub_exp
formulas<span style="color:#666">$</span>fam_int_1 <span style="color:#666">=</span>fam_int_1 <span style="color:#666">~</span> gender <span style="color:#666">+</span> conflict <span style="color:#666">+</span> sub_disorder <span style="color:#666">+</span> dev_peer <span style="color:#666">+</span> sub_exp
formulas<span style="color:#666">$</span>dev_peer <span style="color:#666">=</span>dev_peer <span style="color:#666">~</span> gender <span style="color:#666">+</span> conflict <span style="color:#666">+</span> sub_disorder <span style="color:#666">+</span> fam_int_1 <span style="color:#666">+</span> sub_exp
formulas<span style="color:#666">$</span>sub_exp <span style="color:#666">=</span>sub_exp <span style="color:#666">~</span> gender <span style="color:#666">+</span> conflict <span style="color:#666">+</span> sub_disorder <span style="color:#666">+</span> fam_int_1 <span style="color:#666">+</span> dev_peer

meth <span style="color:#666">&lt;-</span> <span style="color:#06287e">make.method</span>(currentDataset)


imputedDataset <span style="color:#666">&lt;-</span> <span style="color:#06287e">parlmice</span>(currentDataset,
  method <span style="color:#666">=</span> meth,
  formulas <span style="color:#666">=</span> formulas,
  m <span style="color:#666">=</span> <span style="color:#40a070">20</span>,
  n.core <span style="color:#666">=</span> <span style="color:#40a070">1</span>, 
  n.imp.core <span style="color:#666">=</span> <span style="color:#40a070">20</span>)

<span style="color:#06287e">plot</span>(imputedDataset)
currentDataset <span style="color:#666">&lt;-</span> <span style="color:#06287e">complete</span>(imputedDataset, action <span style="color:#666">=</span> <span style="color:#4070a0">&#34;long&#34;</span>, include <span style="color:#666">=</span> <span style="color:#007020;font-weight:bold">TRUE</span>)

<span style="color:#4070a0">&#34;Causal Mediation Analysis&#34;</span>

med_res <span style="color:#666">&lt;-</span> intmed<span style="color:#666">::</span><span style="color:#06287e">mediate</span>(y <span style="color:#666">=</span> <span style="color:#4070a0">&#34;sub_disorder&#34;</span>,
  med <span style="color:#666">=</span> <span style="color:#06287e">c</span>(<span style="color:#4070a0">&#34;dev_peer&#34;</span> ,<span style="color:#4070a0">&#34;sub_exp&#34;</span>),
  treat <span style="color:#666">=</span> <span style="color:#4070a0">&#34;fam_int_1&#34;</span>,
  c <span style="color:#666">=</span> <span style="color:#06287e">c</span>(<span style="color:#4070a0">&#34;gender&#34;</span> ,<span style="color:#4070a0">&#34;conflict&#34;</span>),
  ymodel <span style="color:#666">=</span> <span style="color:#4070a0">&#34;logistic regression&#34;</span>,
  mmodel <span style="color:#666">=</span> <span style="color:#06287e">c</span>(<span style="color:#4070a0">&#34;logistic regression&#34;</span> ,<span style="color:#4070a0">&#34;logistic regression&#34;</span>),
  treat_lv <span style="color:#666">=</span> <span style="color:#40a070">1</span>, control_lv <span style="color:#666">=</span> <span style="color:#40a070">0</span>, incint <span style="color:#666">=</span> <span style="color:#007020;font-weight:bold">FALSE</span>, inc_mmint <span style="color:#666">=</span> <span style="color:#007020;font-weight:bold">FALSE</span>,
  conf.level <span style="color:#666">=</span> <span style="color:#40a070">0.95</span>,
  data <span style="color:#666">=</span> currentDataset, sim <span style="color:#666">=</span> <span style="color:#40a070">1000</span>, digits <span style="color:#666">=</span> <span style="color:#40a070">3</span>,
  HTML_report <span style="color:#666">=</span> <span style="color:#007020;font-weight:bold">FALSE</span>, complete_analysis <span style="color:#666">=</span> <span style="color:#007020;font-weight:bold">FALSE</span>,
  imputed_data <span style="color:#666">=</span> <span style="color:#007020;font-weight:bold">TRUE</span>)

</code></pre></div><br/>

<h5 id="using-statsnotebook" class="anchor-link"><a href="#using-statsnotebook">Using StatsNotebook</a></h5>
<p>Prior to running the causal mediation analysis, we will need to conduct a <a href="https://statsnotebook.io/blog/analysis/descriptive/" title="Descriptive statistics">descriptive analysis</a> and it is always a good practice to <a href="https://statsnotebook.io/blog/dataviz/" title="dataviz">visualise the data</a>.</p>
<p>To run a causal mediation analysis,</p>
<ol>
<li>Click <strong>Analysis</strong> at the top</li>
<li>Click <strong>Causal</strong> and select <strong>Causal Mediation Analysis</strong> from the menu</li>
<li>In the left panel, select <em>sub_disorder</em> into <em>Outcome</em>, <em>fam_int</em> into <em>Exposure</em>, <em>dev_peer</em> and <em>sub_exp</em> into <em>Mediator(s)</em>, and <em>gender</em> and <em>conflict</em> into covariates.
<ul>
<li>We add <em>gender</em> and <em>conflict</em> as covariates to adjust for their effects.</li>
<li>All categorical variables will need to be coded as a <strong>factor</strong> (such as <em>sub_disorder</em>, <em>fam_int</em>, <em>dev_peer</em>, <em>sub_exp</em> and <em>gender</em>. In this example dataset, this has already been done). <a href="https://statsnotebook.io/blog/data_management/variable_conversion/" title="variable converstion">Converting variable type</a> for step-by-step guide.</li>
</ul>
</li>
</ol>
<img src="https://statsnotebook.io/blog/analysis/img/causal_mediation.png" alt="causal mediation analysis" title="causal mediation analysis"/></a>
<ol start="4">
<li>Expand the panel <strong>Analysis Setting</strong>.
<ul>
<li>Select the models for the mediators and the dependent variable.
<ul>
<li>Linear regression for numeric variable</li>
<li>Logistic regression for dichotomized variable</li>
<li>Poisson regression for count variable</li>
<li>In this example, since the mediators and the dependent variable are dichotomized, select <strong>Logistic regression (Dichotomized variable)</strong> for <em>sub_disorder</em>, <em>dev_peer</em> and <em>sub_exp</em>.</li>
</ul>
</li>
<li>Select <strong>1</strong> as the treatment level and <strong>0</strong> as the control level.
<ul>
<li>If the independent variable is a numeric variable, type 1 for treatment level and 0 for control level.</li>
</ul>
</li>
<li>Select the <strong>100</strong> as the number of simulations.
<ul>
<li>100 is good for an initial assessment of the mediation effect. For final analysis, use at least 1000 simulations.</li>
</ul>
</li>
<li>Since there are missing data in this dataset, click <strong>Impute missing data</strong>, and input <strong>20</strong> as the number of imputations.
<ul>
<li>As a rule of thumb, the number of imputations should be around the percentage of missing data.</li>
</ul>
</li>
</ul>
</li>
</ol>
<img src="https://statsnotebook.io/blog/analysis/img/mediation_setting.png" alt="mediation analysis setting" title="mediation analysis setting"/></a>

<h5 id="interpretation" class="anchor-link"><a href="#interpretation">Interpretation</a></h5>
<p>Below is the output from <strong>StatsNotebook</strong>. The analysis is conducted using the <code>intmed</code> package and most of the output is self-explanatory.</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">There were <span style="color:#40a070">25.86</span>% cases with missing data. Multiple imputation was used to impute missing <span style="color:#06287e">data </span>(Rubin, <span style="color:#40a070">2009</span>) and <span style="color:#40a070">20</span> datasets were imputed using the R package <span style="color:#06287e">MICE </span>(van Buuren, <span style="color:#40a070">2010</span>).

The table below shows the estimates from the key regression models for the mediation analysis.

    variables     m1.b          m1.ci  m1.p    m2.b          m2.ci  m2.p
<span style="color:#40a070">1</span> (Intercept)    <span style="color:#40a070">0.708</span> (<span style="color:#40a070">0.388</span>, <span style="color:#40a070">1.292</span>) <span style="color:#40a070">0.260</span>   <span style="color:#40a070">0.980</span> (<span style="color:#40a070">0.536</span>, <span style="color:#40a070">1.791</span>) <span style="color:#40a070">0.947</span>
<span style="color:#40a070">2</span>    conflict    <span style="color:#40a070">1.220</span> (<span style="color:#40a070">0.963</span>, <span style="color:#40a070">1.545</span>) <span style="color:#40a070">0.099</span>   <span style="color:#40a070">1.213</span> (<span style="color:#40a070">0.953</span>, <span style="color:#40a070">1.544</span>) <span style="color:#40a070">0.117</span>
<span style="color:#40a070">3</span>  genderMale    <span style="color:#40a070">1.234</span> (<span style="color:#40a070">0.861</span>, <span style="color:#40a070">1.771</span>) <span style="color:#40a070">0.252</span>   <span style="color:#40a070">1.156</span> (<span style="color:#40a070">0.804</span>, <span style="color:#40a070">1.661</span>) <span style="color:#40a070">0.434</span>
<span style="color:#40a070">4</span>   fam_int_1 <span style="color:#40a070">0.517</span><span style="color:#666">***</span> (<span style="color:#40a070">0.358</span>, <span style="color:#40a070">0.747</span>) <span style="color:#40a070">0.000</span> <span style="color:#40a070">0.539</span><span style="color:#666">**</span> (<span style="color:#40a070">0.369</span>, <span style="color:#40a070">0.788</span>) <span style="color:#40a070">0.001</span>
<span style="color:#40a070">5</span>   dev_peer1     <span style="color:#666">&lt;</span><span style="color:#007020;font-weight:bold">NA</span><span style="color:#666">&gt;</span>           <span style="color:#666">&lt;</span><span style="color:#007020;font-weight:bold">NA</span><span style="color:#666">&gt;</span>  <span style="color:#666">&lt;</span><span style="color:#007020;font-weight:bold">NA</span><span style="color:#666">&gt;</span>    <span style="color:#666">&lt;</span><span style="color:#007020;font-weight:bold">NA</span><span style="color:#666">&gt;</span>           <span style="color:#666">&lt;</span><span style="color:#007020;font-weight:bold">NA</span><span style="color:#666">&gt;</span>  <span style="color:#666">&lt;</span><span style="color:#007020;font-weight:bold">NA</span><span style="color:#666">&gt;</span>
<span style="color:#40a070">6</span>    sub_exp1     <span style="color:#666">&lt;</span><span style="color:#007020;font-weight:bold">NA</span><span style="color:#666">&gt;</span>           <span style="color:#666">&lt;</span><span style="color:#007020;font-weight:bold">NA</span><span style="color:#666">&gt;</span>  <span style="color:#666">&lt;</span><span style="color:#007020;font-weight:bold">NA</span><span style="color:#666">&gt;</span>    <span style="color:#666">&lt;</span><span style="color:#007020;font-weight:bold">NA</span><span style="color:#666">&gt;</span>           <span style="color:#666">&lt;</span><span style="color:#007020;font-weight:bold">NA</span><span style="color:#666">&gt;</span>  <span style="color:#666">&lt;</span><span style="color:#007020;font-weight:bold">NA</span><span style="color:#666">&gt;</span>
       y.b           y.ci   y.p
<span style="color:#40a070">1</span> <span style="color:#40a070">0.061</span><span style="color:#666">***</span> (<span style="color:#40a070">0.019</span>, <span style="color:#40a070">0.200</span>) <span style="color:#40a070">0.000</span>
<span style="color:#40a070">2</span>    <span style="color:#40a070">0.820</span> (<span style="color:#40a070">0.531</span>, <span style="color:#40a070">1.267</span>) <span style="color:#40a070">0.371</span>
<span style="color:#40a070">3</span>    <span style="color:#40a070">1.396</span> (<span style="color:#40a070">0.779</span>, <span style="color:#40a070">2.501</span>) <span style="color:#40a070">0.262</span>
<span style="color:#40a070">4</span>    <span style="color:#40a070">0.603</span> (<span style="color:#40a070">0.331</span>, <span style="color:#40a070">1.102</span>) <span style="color:#40a070">0.100</span>
<span style="color:#40a070">5</span> <span style="color:#40a070">4.132</span><span style="color:#666">***</span> (<span style="color:#40a070">1.891</span>, <span style="color:#40a070">9.031</span>) <span style="color:#40a070">0.000</span>
<span style="color:#40a070">6</span>    <span style="color:#40a070">1.745</span> (<span style="color:#40a070">0.739</span>, <span style="color:#40a070">4.123</span>) <span style="color:#40a070">0.203</span>

Mediation analysis was performed based on the counter<span style="color:#666">-</span>factual framework and the interventional <span style="color:#06287e">effect </span>(Vansteelandt and Daniel, <span style="color:#40a070">2017</span>; Chan and Leung, <span style="color:#40a070">2020</span>). The analysis was conducted in R using the intmed <span style="color:#06287e">package </span>(Chan and Leung, <span style="color:#40a070">2020</span>) with <span style="color:#40a070">1000</span> simulations.

                                                 effect    est               ci
<span style="color:#40a070">1</span>                    indirect effect through mediator <span style="color:#40a070">1</span> <span style="color:#40a070">-0.018</span> (<span style="color:#40a070">-0.037</span>, <span style="color:#40a070">-0.004</span>)
<span style="color:#40a070">2</span>                    indirect effect through mediator <span style="color:#40a070">2</span> <span style="color:#40a070">-0.007</span> (<span style="color:#40a070">-0.021</span>,  <span style="color:#40a070">0.004</span>)
<span style="color:#40a070">3</span> indirect effect through interaction between mediators  <span style="color:#40a070">0.001</span> (<span style="color:#40a070">-0.002</span>,  <span style="color:#40a070">0.005</span>)
<span style="color:#40a070">4</span>  indirect effect through dependence between mediators  <span style="color:#40a070">0.000</span> (<span style="color:#40a070">-0.009</span>,  <span style="color:#40a070">0.009</span>)
<span style="color:#40a070">5</span>                                         direct effect <span style="color:#40a070">-0.055</span> (<span style="color:#40a070">-0.120</span>,  <span style="color:#40a070">0.010</span>)
<span style="color:#40a070">6</span>                                          total effect <span style="color:#40a070">-0.077</span> (<span style="color:#40a070">-0.143</span>, <span style="color:#40a070">-0.016</span>)
<span style="color:#40a070">7</span>               proportion of effect through mediator <span style="color:#40a070">1</span>  <span style="color:#40a070">0.218</span>                 
<span style="color:#40a070">8</span>               proportion of effect through mediator <span style="color:#40a070">2</span>  <span style="color:#40a070">0.078</span>                 
      p
<span style="color:#40a070">1</span> <span style="color:#40a070">0.005</span>
<span style="color:#40a070">2</span> <span style="color:#40a070">0.202</span>
<span style="color:#40a070">3</span> <span style="color:#40a070">0.448</span>
<span style="color:#40a070">4</span> <span style="color:#40a070">0.975</span>
<span style="color:#40a070">5</span> <span style="color:#40a070">0.099</span>
<span style="color:#40a070">6</span> <span style="color:#40a070">0.011</span>
<span style="color:#40a070">7</span>      
<span style="color:#40a070">8</span>      

Reference
Rubin DB. Multiple imputation for nonresponse in surveys. New York<span style="color:#666">:</span> John Wiley <span style="color:#666">&amp;</span> Sons; <span style="color:#40a070">2009</span>.
Buuren Sv, Groothuis<span style="color:#666">-</span>Oudshoorn K. mice<span style="color:#666">:</span> Multivariate imputation by chained equations in R. Journal of statistical software. <span style="color:#40a070">2010</span><span style="color:#666">:</span><span style="color:#40a070">1-68</span>.
Vansteelandt S, Daniel RM. Interventional effects for mediation analysis with multiple mediators. <span style="color:#06287e">Epidemiology </span>(Cambridge, Mass). 2017; <span style="color:#40a070">28</span>(<span style="color:#40a070">2</span>)<span style="color:#666">:</span><span style="color:#40a070">258</span>.
Chan G, Leung J. Causal mediation analysis using the interventional effect approach. A refined definition. Paper uner review. <span style="color:#40a070">2020</span>.

</code></pre></div><br/>
<p>There are two key sections of the output: Results from regression models and Results from mediation analysis.</p>
<p><strong>Results from regression models</strong></p>
<p>Behind the scene, three key regression models are run.</p>
<ol>
<li><em>dev_peer</em> (mediator) is regressed on <em>fam_int</em> (independent variable), <em>gender</em> and <em>conflict</em> in a logistic regression
<ul>
<li>This is to assess the effect of <em>fam_int</em> on <em>dev_peer</em>, adjusting for <em>gender</em> and <em>conflict</em>.</li>
</ul>
</li>
<li><em>sub_exp</em> (mediator) is regressed on <em>fam_int</em> (independent variable), <em>gender</em> and <em>conflict</em> in a logsitic regression
<ul>
<li>This is to assess the effect of <em>fam_int</em> on <em>dev_peer</em>, adjusting for <em>gender</em> and <em>conflict</em></li>
</ul>
</li>
<li><em>sub_disorder</em> (dependent variable) is regressed on <em>dev_peer</em> (mediator), <em>sub_exp</em> (mediator), <em>fam_int</em> (indenpendent variable), <em>gender</em> and <em>conflict</em> in a logistic regression.
<ul>
<li>This is to assess the effect of <em>dev_peer</em>, <em>sub_exp</em> and <em>fam_int</em> on <em>sub_disorder</em>, adjusting for <em>gender</em> and <em>conflict</em>.</li>
</ul>
</li>
</ol>
<p>The table below from the <strong>StatsNotebook</strong> summarises the odds ratio, 95% confidence intervals and p-value from these three models. With a significance level of 0.05, the results indicate that participation in family intervention reduces the odds of engagement with deviant peers, OR = 0.517, 95% CI (0.358, 0.747) and experimentation with drugs, OR = 0.539, 95% CI (0.369, 0.788). Family intervention may reduce odds of substance use disorder directly, OR = 0.603, 95% CI (0.331, 1.102), but this effect is not statistically significant. Engagement with deviant peers increased the odds of substance use disorder, OR = 4.132, 95% CI (1.891, 9.031). Experimentation with drugs may increase the odds of substance use disorder, OR = 1.745, 95% CI (0.739, 4.123), but this effect is not statistically significant.</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">The table below shows the estimates from the key regression models for the mediation analysis.

    variables     m1.b          m1.ci  m1.p    m2.b          m2.ci  m2.p
<span style="color:#40a070">1</span> (Intercept)    <span style="color:#40a070">0.708</span> (<span style="color:#40a070">0.388</span>, <span style="color:#40a070">1.292</span>) <span style="color:#40a070">0.260</span>   <span style="color:#40a070">0.980</span> (<span style="color:#40a070">0.536</span>, <span style="color:#40a070">1.791</span>) <span style="color:#40a070">0.947</span>
<span style="color:#40a070">2</span>    conflict    <span style="color:#40a070">1.220</span> (<span style="color:#40a070">0.963</span>, <span style="color:#40a070">1.545</span>) <span style="color:#40a070">0.099</span>   <span style="color:#40a070">1.213</span> (<span style="color:#40a070">0.953</span>, <span style="color:#40a070">1.544</span>) <span style="color:#40a070">0.117</span>
<span style="color:#40a070">3</span>  genderMale    <span style="color:#40a070">1.234</span> (<span style="color:#40a070">0.861</span>, <span style="color:#40a070">1.771</span>) <span style="color:#40a070">0.252</span>   <span style="color:#40a070">1.156</span> (<span style="color:#40a070">0.804</span>, <span style="color:#40a070">1.661</span>) <span style="color:#40a070">0.434</span>
<span style="color:#40a070">4</span>   fam_int_1 <span style="color:#40a070">0.517</span><span style="color:#666">***</span> (<span style="color:#40a070">0.358</span>, <span style="color:#40a070">0.747</span>) <span style="color:#40a070">0.000</span> <span style="color:#40a070">0.539</span><span style="color:#666">**</span> (<span style="color:#40a070">0.369</span>, <span style="color:#40a070">0.788</span>) <span style="color:#40a070">0.001</span>
<span style="color:#40a070">5</span>   dev_peer1     <span style="color:#666">&lt;</span><span style="color:#007020;font-weight:bold">NA</span><span style="color:#666">&gt;</span>           <span style="color:#666">&lt;</span><span style="color:#007020;font-weight:bold">NA</span><span style="color:#666">&gt;</span>  <span style="color:#666">&lt;</span><span style="color:#007020;font-weight:bold">NA</span><span style="color:#666">&gt;</span>    <span style="color:#666">&lt;</span><span style="color:#007020;font-weight:bold">NA</span><span style="color:#666">&gt;</span>           <span style="color:#666">&lt;</span><span style="color:#007020;font-weight:bold">NA</span><span style="color:#666">&gt;</span>  <span style="color:#666">&lt;</span><span style="color:#007020;font-weight:bold">NA</span><span style="color:#666">&gt;</span>
<span style="color:#40a070">6</span>    sub_exp1     <span style="color:#666">&lt;</span><span style="color:#007020;font-weight:bold">NA</span><span style="color:#666">&gt;</span>           <span style="color:#666">&lt;</span><span style="color:#007020;font-weight:bold">NA</span><span style="color:#666">&gt;</span>  <span style="color:#666">&lt;</span><span style="color:#007020;font-weight:bold">NA</span><span style="color:#666">&gt;</span>    <span style="color:#666">&lt;</span><span style="color:#007020;font-weight:bold">NA</span><span style="color:#666">&gt;</span>           <span style="color:#666">&lt;</span><span style="color:#007020;font-weight:bold">NA</span><span style="color:#666">&gt;</span>  <span style="color:#666">&lt;</span><span style="color:#007020;font-weight:bold">NA</span><span style="color:#666">&gt;</span>
       y.b           y.ci   y.p
<span style="color:#40a070">1</span> <span style="color:#40a070">0.061</span><span style="color:#666">***</span> (<span style="color:#40a070">0.019</span>, <span style="color:#40a070">0.200</span>) <span style="color:#40a070">0.000</span>
<span style="color:#40a070">2</span>    <span style="color:#40a070">0.820</span> (<span style="color:#40a070">0.531</span>, <span style="color:#40a070">1.267</span>) <span style="color:#40a070">0.371</span>
<span style="color:#40a070">3</span>    <span style="color:#40a070">1.396</span> (<span style="color:#40a070">0.779</span>, <span style="color:#40a070">2.501</span>) <span style="color:#40a070">0.262</span>
<span style="color:#40a070">4</span>    <span style="color:#40a070">0.603</span> (<span style="color:#40a070">0.331</span>, <span style="color:#40a070">1.102</span>) <span style="color:#40a070">0.100</span>
<span style="color:#40a070">5</span> <span style="color:#40a070">4.132</span><span style="color:#666">***</span> (<span style="color:#40a070">1.891</span>, <span style="color:#40a070">9.031</span>) <span style="color:#40a070">0.000</span>
<span style="color:#40a070">6</span>    <span style="color:#40a070">1.745</span> (<span style="color:#40a070">0.739</span>, <span style="color:#40a070">4.123</span>) <span style="color:#40a070">0.203</span>

</code></pre></div><br/>
<p><strong>Results from mediation analysis</strong></p>
<p>The second table shows the results from mediation analysis.</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">Mediation analysis was performed based on the counter<span style="color:#666">-</span>factual framework and the interventional <span style="color:#06287e">effect </span>(Vansteelandt and Daniel, <span style="color:#40a070">2017</span>; Chan and Leung, <span style="color:#40a070">2020</span>). The analysis was conducted in R using the intmed <span style="color:#06287e">package </span>(Chan and Leung, <span style="color:#40a070">2020</span>) with <span style="color:#40a070">1000</span> simulations.

                                                 effect    est               ci
<span style="color:#40a070">1</span>                    indirect effect through mediator <span style="color:#40a070">1</span> <span style="color:#40a070">-0.018</span> (<span style="color:#40a070">-0.037</span>, <span style="color:#40a070">-0.004</span>)
<span style="color:#40a070">2</span>                    indirect effect through mediator <span style="color:#40a070">2</span> <span style="color:#40a070">-0.007</span> (<span style="color:#40a070">-0.021</span>,  <span style="color:#40a070">0.004</span>)
<span style="color:#40a070">3</span> indirect effect through interaction between mediators  <span style="color:#40a070">0.001</span> (<span style="color:#40a070">-0.002</span>,  <span style="color:#40a070">0.005</span>)
<span style="color:#40a070">4</span>  indirect effect through dependence between mediators  <span style="color:#40a070">0.000</span> (<span style="color:#40a070">-0.009</span>,  <span style="color:#40a070">0.009</span>)
<span style="color:#40a070">5</span>                                         direct effect <span style="color:#40a070">-0.055</span> (<span style="color:#40a070">-0.120</span>,  <span style="color:#40a070">0.010</span>)
<span style="color:#40a070">6</span>                                          total effect <span style="color:#40a070">-0.077</span> (<span style="color:#40a070">-0.143</span>, <span style="color:#40a070">-0.016</span>)
<span style="color:#40a070">7</span>               proportion of effect through mediator <span style="color:#40a070">1</span>  <span style="color:#40a070">0.218</span>                 
<span style="color:#40a070">8</span>               proportion of effect through mediator <span style="color:#40a070">2</span>  <span style="color:#40a070">0.078</span>                 
      p
<span style="color:#40a070">1</span> <span style="color:#40a070">0.005</span>
<span style="color:#40a070">2</span> <span style="color:#40a070">0.202</span>
<span style="color:#40a070">3</span> <span style="color:#40a070">0.448</span>
<span style="color:#40a070">4</span> <span style="color:#40a070">0.975</span>
<span style="color:#40a070">5</span> <span style="color:#40a070">0.099</span>
<span style="color:#40a070">6</span> <span style="color:#40a070">0.011</span>
<span style="color:#40a070">7</span>      
<span style="color:#40a070">8</span>      

</code></pre></div><br/>
<p>Since <em>sub_disorder</em> is a dichotomised variable, the estimates are in a <strong>probability scale</strong>. Overall, the total effect of <em>fam_int</em> is -0.077, indicating that participation in family intervention reduces the probability of <em>sub_disorder</em> by 0.077 (i.e. 7.7%). Of this total effect, 0.018 (est = -0.018, 95% CI [-0.037, -0.004]) is significantly mediated through <em>dev_peer</em> and 0.007 (est = -0.007, 95% CI [-0.021, 0.004]) is mediated through <em>sub_exp</em>. Overall, it is estimated that 21.8% of the total effect is mediated through <em>dev_peer</em> and 7.8% through <em>sub_exp</em>.</p>

	<br/>
	<p><strong>Follow <a href="https://www.facebook.com/StatsNotebook/">our Facebook page</a> or <a href="https://twitter.com/GaryCKChan">our developer&rsquo;s Twitter</a> for more tutorials and future updates.</strong></p>
</div>





                
                <div class="container">
    <hr>
</div>
<div class="container has-text-centered top-pad">
    <a href="#top">
        <i class="fa fa-arrow-up"></i>
    </a>
</div>

<div class="container">
    <hr>
</div>

                <div class="section" id="footer">
    <div class="container has-text-centered">
    
        <span class="footer-text">
            <a href="https://github.com/victoriadrake/hugo-theme-introduction/"><strong>Introduction</strong></a> theme for <a href="http://gohugo.io/">Hugo</a>. Made with <a href="https://victoria.dev"><i class="fa fa-heart"></i> and <i class="fa fa-coffee"></i></a> by open source contributors.
        </span>
    
    </div>
</div>

                
            </div>
        </section>
        
        


<script src="https://statsnotebook.io/js/bundle.8b77b63e5197d7777848e24ba70612839fe8d02e9599db63365da671cb233a8a.js" integrity="sha256-i3e2PlGX13d4SOJLpwYSg5/o0C6VmdtjNl2mccsjOoo="></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-180705456-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>





        
        
        
        
    </body>
</html>
